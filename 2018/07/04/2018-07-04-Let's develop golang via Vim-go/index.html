<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Let's develop golang via Vim-go · wkchen's blog</title><meta name="description" content="Let's develop golang via Vim-go - wkchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.tipdev.xyz/atom.xml" title="wkchen's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">TIMELINE</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Let's develop golang via Vim-go</h1><div class="post-info">Jul 4, 2018</div><div class="post-content"><p>最近有时间继续我的 golang 学习了， 之前使用 vscode 作为主要开发的 ide，最近在不同的机子上写一些代码片，vscode 就不再是我的第一选择了。取而代之的是 vim ，上手写 go 也是非常顺手。分享一下我是怎么搭建我的 go 开发工具的。</p>
<p>先看效果图：</p>
<p><img src="/images/vim/vim-go/show.gif" alt="show"></p>
<h3 id="安装-Vim-（我用的是-Vim8-1）"><a href="#安装-Vim-（我用的是-Vim8-1）" class="headerlink" title="安装 Vim （我用的是 Vim8.1）"></a>安装 Vim （我用的是 Vim8.1）</h3><p>   关于安装，其实 Linux、MacOS 下都预装了 vim</p>
<p>   关于配置，我以前写过一篇文章，传送门-&gt; <a href="http://blog.cz1y.com/2017/11/07/2017-11-07-Let&#39;s%20%E7%82%AB%E9%85%B7%E7%BB%88%E7%AB%AF/" target="_blank" rel="external">Let’s 炫酷终端</a></p>
<h3 id="安装-Vim-go"><a href="#安装-Vim-go" class="headerlink" title="安装 Vim-go"></a>安装 Vim-go</h3><p>   Step1. 这里我使用 Vundle 进行安装，在<code>~/.vimrc</code> 中修改一下内容：</p>
   <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># vim ~/.vimrc</div><div class="line"></div><div class="line">call vundle#begin()</div><div class="line">Plugin &apos;VundleVim/Vundle.vim&apos;</div><div class="line">&quot; 添加 vim-go</div><div class="line">Plugin &apos;fatih/vim-go&apos; </div><div class="line">call vundle#end()</div></pre></td></tr></table></figure>
<p>   Step2. w保存后，使用<code>:PluginInstall</code>进行安装，如果很慢当然了可以直接把 <a href="https://github.com/fatih/vim-go" target="_blank" rel="external">vim-go</a>  git仓库 clone 下来。</p>
<p>   关于 vim-go 的具体功能我就不多说了，<a href="https://github.com/fatih/vim-go" target="_blank" rel="external">vim-go</a> 的 README 里说的很明白，还推荐一个<a href="https://www.youtube.com/channel/UCaPX53JLxxSbwZz_Ra_cL0g" target="_blank" rel="external">DigitalOcean</a>的关于 vim-go 视频。</p>
<h3 id="安装-YouCompleteMe"><a href="#安装-YouCompleteMe" class="headerlink" title="安装 YouCompleteMe"></a>安装 YouCompleteMe</h3><p>   YouCompleteMe 的作用是自动补全代码，不仅支持 Golang，还支持 C、Python、Ruby 等等。Vim-go 下的代码提示需要CTRL-X + CTRL-O，虽然可以通过映射，但还是比较麻烦。</p>
<p>   Setp1. 同样适用 Vundle 安装 YouCompleteMe，在<code>~/.vimrc</code> 修改一下内容：</p>
   <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># vim ~/.vimrc</div><div class="line"></div><div class="line">call vundle#begin()</div><div class="line">Plugin &apos;VundleVim/Vundle.vim&apos;</div><div class="line">Plugin &apos;fatih/vim-go&apos; </div><div class="line">&quot; 添加 YouCompleteMe</div><div class="line">Plugin &apos;Valloric/YouCompleteMe&apos;</div><div class="line">call vundle#end()</div></pre></td></tr></table></figure>
<p>   Step2. w 保存后，使用 <code>:PluginInstall</code> 进行安装，如果很慢当然了可以直接把<a href="https://github.com/Valloric/YouCompleteMe" target="_blank" rel="external">YouCompleteMe</a> git 仓库 clone 下来。</p>
<p>   Step3. 然后进到 <code>.vim/bundle/YouCompleteMe</code> 执行一下安装：</p>
   <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">./install.py  --clang-completer --go-completer</div></pre></td></tr></table></figure>
<p>   如果提示 File /root/.vim/bundle/YouCompleteMe/third_party/ycmd/build.py does not exist; you probably forgot to run:git submodule update –init —recursive 执行组册子模块。</p>
   <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git submodule update --init —recursive</div></pre></td></tr></table></figure>
<p>   当我创建并打开一个 go 文件时，YouCompleteMe unavailable:cannot import name _remove_dead_weakref 警告，导致不会自动补全。</p>
<p>   在 YouCompleteMe 的 <a href="https://github.com/Valloric/YouCompleteMe/issues/2883" target="_blank" rel="external">Issues</a> 中解决方法：</p>
   <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">brew unintsall python@2</div></pre></td></tr></table></figure>
<p>   应该是安装了多个版本的 pyhton 导致的，使用以上命令后重复上面 <code>./install.py …</code> 步骤即可。</p>
<h3 id="函数跳转"><a href="#函数跳转" class="headerlink" title="函数跳转"></a>函数跳转</h3><p>   在翻看 Vim-go 的 Issues 的时候，看到关于 <a href="https://github.com/fatih/vim-go/issues/667" target="_blank" rel="external">Add support for Vim tag stack to GoDef?</a> 的讨论，使用 CREL-] 进入函数，使用 CTRL-T 跳出函数，第一次使用的时候会提示你缺少相应的 binary，根据提示使用 <code>:GoInstallBinaries</code> 进行安装即可。</p>
<p>   ​</p>
<p>   ​</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/10/08/2018-10-08-Elastic 入门 — ElaticSearch Kibana 安装/" class="prev">PREV</a><a href="/2018/05/08/2018-05-08-React Native 热更新 CodePush/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://www.tipdev.xyz">wkchen</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>